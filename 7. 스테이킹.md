## everiToken 스테이킹

everiToken은 4.x 시리즈부터 스테이킹을 지원한다. 이를 통해 **DPOS**(Delegated Proof-Of-Stake)와 **POS**(Proof-Of-Stake)로 구성된 새로운 합의 알고리즘을 채택할 수 있다. 토큰 소유자들은 밸리데이터에게 투표하기 위해 EVT를 사용할 수 있다. 상위 21명의 밸리데이터가 **블록 프로듀서** 노드로 선정된다. 다른 **블록 프로듀서가 아닌** 밸리데이터는 블록을 수신 및 검증할 수 있으며 체인 내 무작위 번호 생성에 참여할 수 있다.

everiToken에서 밸리데이터 노드를 운영하는 것은 투자 펀드를 운영하는 것과 비슷하다. 모든 밸리데이터의 최초 순 값은 항상 주당 EVT 1과 동일한다. 이 지분들을 순액으로 매입하는 것과 비슷한 방식으로 작업을 한다. 예를 들어, 1주당 1 EVT의 순값을 갖는 하나의 밸리데이터에 1000개의 EVT를 투자한다면, 그 밸리데이터의 1000주 가치를 얻게 된다.

새로운 밸리데이터를 등록하는 데는 제한이 없으며 모든 토큰 홀더가 등록 할 수 있다. 그러나 __100'000__ 개의 지분을 가지고 있어야만 보너스를 받을 수 있다.

모든 스테이킹 EVT는 **스테이크 풀**이라는 고유한 풀로 들어가고 전체 풀의 ROI는 1) 스테이크 풀의 총량과 2) 스테이크 풀의 생성 시간이라는 두 가지 요소에 따라 달라진다. 스테이크 풀의 양이 증가하고 생성 시간이 경과하면 ROI가 감소한다.

스테이크 풀의 ROI 표:

![ROI](/imgs/developers/ROIs.png)

ROI 공식: ![formula-1](/imgs/developers/staking-formula1.svg)

> 현재 **r**은 50000, **t**는 -0.67, **q**는 10, **w**는 -0.001이다. **A**는 스테이킹된 EVT의 총량이며 **D**는 스테이크 풀이 생성된 이후 총 일수이다.

밸리데이터의 경우 노드가 효율적으로 계속 실행되면 몇 시간마다 스테이크 풀의 ROI를 순액으로 받는다. 즉, 자신의 노드 운영 안정성을 나타내는 한 밸리데이터와 토큰 홀더의 **수익 곡선(yield curve)** 이 더 많은 EVT를 획득하는 데 도움이 되는 이러한 기준을 충족하는 우수한 밸리데이터를 선택할 의도를 가지고 있다는 것이다.

지분을 적정한 금액으로 매입하는 지분작업과 달리 언스테이킹을 하는 것은 지분을 회수하는 것과 비슷하다. 당신의 구매와 인출의 순가치의 차이는 각 지분의 이익이다. 예를 들어 지분 순액당 1.5 EVT로 1000주를 인출하고 구입한 순액이 주당 1 EVT인 경우 최종 이익은 500 EVT와 같다.

### 밸리데이터

누구나 새로운 밸리데이터를 등록하기 위해 `newvalidator` 작업을 사용할 수 있으며, 네트워크에 참여하고 스테이크 풀에서 이익을 얻기 전에 적어도 10만 개의 EVT를 새 밸리데이터에 스테이킹해야 한다. 모든 토큰 보유자들은 지분을 구매하기 위해 EVT를 새로운 밸리데이터에 투자할 수 있다. 스테이킹 액수가 더 작은 밸리데이터에 대한 추가 ROI가 있을 것이다.

### 스테이크 홀더

모든 EVT 홀더들은 `staketkns` 동작을 눌러 자신의 토큰을 모든 유효 밸리데이터에 스테이킹할 수 있다. 그리고 고정할 때 두 가지 종류의 옵션이 있다. 즉, 능동형과 고정형이다. 일정 기간 동안 고정지분이 잠길 것을 약속받는 동안 활성지분은 언제든지 철회할 수 있다. 기간의 길이에 따라, 지분의 잠금이 길어질수록 ROI는 더 높아질 것이다.

추가 ROI 공식: ![formula-2](/imgs/developers/staking-formula2.svg)

> 현재 **r**은 150이고 **t**는 5이다. **D**는 스테이킹 된 총 일수다.

`unstaketkns` 작업은 스테이킹 되어 있는 지분을 철회하는 데 사용됩니다. 고정된 지분의 경우에 스테이킹 되어 있는 지분으로 전환하려면 `toactivetkns` 작업이 필요하다. 
